{"version":3,"file":"commonHelpers.js","sources":["../src/js/search-photos.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst iconLeft = new URL('../img/icons/arrow-icons.svg#icon-left', import.meta.url).href; \nconst iconRight = new URL('../img/icons/arrow-icons.svg#icon-right', import.meta.url).href; \n\nconst iconError = new URL('/img/icons/error-icon.svg', import.meta.url).href;\n\nconst gallery = document.querySelector('.gallery');\nconst galleryForm = document.querySelector('.search-photos');\nconst loader = document.querySelector('.loader-wrapper');\n\nconst mistake = (message) => {\n    iziToast.show({\n        title: 'ERROR',\n        backgroundColor: 'rgba(239, 64, 64, 1)',\n        theme: 'dark',\n        message: message,\n        position: 'topRight',\n        timeout: 5000,\n        iconUrl: iconError,\n    });\n};\n\nconst getPhotos = (userQuery) => {\n    const searchParams = new URLSearchParams({\n        key: '41527103-e0775164a767d3baf6162359a',\n        q: encodeURIComponent(userQuery).replace(/%20/g, '+'),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const BASE_URL = `https://pixabay.com/api/?${searchParams}`;\n\n    fetch(BASE_URL, {\n    })\n        .then(res => {\n            if (!res.ok) {\n                throw new Error('Sorry, there are some internal mistakes. Please, try reload the page!');\n            }\n            else return res.json();\n        })\n        .then(res => {\n            const allImages = res.hits;\n            if (res.total === 0) {\n                throw new Error('Sorry, there are no images matching your search query. Please, try again!');\n            }\n            else {\n                const galleryMarkup = allImages.map(({ webformatURL: preview, largeImageURL: original, tags: description }) => {\n                    return `\n                        <li class=\"gallery-item\">\n                            <a class=\"gallery-link\" href=\"${original}\">\n                                <img\n                                    loading=\"lazy\"\n                                    class=\"gallery-image\"\n                                    src=\"${preview}\"\n                                    alt=\"${description}\"\n                                />\n                            </a>\n                        </li>\n                        `\n                }).join('');\n                gallery.innerHTML = galleryMarkup;\n                const lightbox = new SimpleLightbox('.gallery a', {\n                    navText: [\n                        `<svg width=\"24\" height=\"24\"><use href=\"${iconLeft}\"></svg>`,\n                        `<svg width=\"24\" height=\"24\"><use href=\"${iconRight}\"></svg>`\n                    ],\n                    captionsData: \"alt\",\n                    captionDelay: false,\n                });\n                lightbox.refresh();\n            };\n        })\n        .catch(err => {\n            mistake(err.message);\n        })\n        .finally(() => {\n            loader.classList.add('visually-hidden');\n        });\n};\n\nconst handleSubmit = (e) => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    loader.classList.remove('visually-hidden');\n    const userQuery = e.target.elements[0].value.trim().toLowerCase().toString();\n    getPhotos(userQuery);\n    e.target.reset();\n };\n\ngalleryForm.addEventListener('submit', handleSubmit);"],"names":["iconLeft","iconRight","iconError","gallery","galleryForm","loader","mistake","message","iziToast","getPhotos","userQuery","BASE_URL","res","allImages","galleryMarkup","preview","original","description","SimpleLightbox","err","handleSubmit","e"],"mappings":"6vBAIA,MAAMA,EAAW,IAAkE,IAAA,2DAAA,KAAA,QAAA,EAAC,KAC9EC,EAAY,IAAmE,IAAA,4DAAA,KAAA,QAAA,EAAC,KAEhFC,EAAY,IAAA,IAAA,gDAAA,KAAA,QAAA,EAAsD,KAElEC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAS,SAAS,cAAc,iBAAiB,EAEjDC,EAAWC,GAAY,CACzBC,EAAS,KAAK,CACV,MAAO,QACP,gBAAiB,uBACjB,MAAO,OACP,QAASD,EACT,SAAU,WACV,QAAS,IACT,QAASL,CACjB,CAAK,CACL,EAEMO,EAAaC,GAAc,CAS7B,MAAMC,EAAW,4BARI,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAG,mBAAmBD,CAAS,EAAE,QAAQ,OAAQ,GAAG,EACpD,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,IAID,MAAMC,EAAU,CACpB,CAAK,EACI,KAAKC,GAAO,CACT,GAAKA,EAAI,GAGJ,OAAOA,EAAI,OAFZ,MAAM,IAAI,MAAM,uEAAuE,CAGvG,CAAS,EACA,KAAKA,GAAO,CACT,MAAMC,EAAYD,EAAI,KACtB,GAAIA,EAAI,QAAU,EACd,MAAM,IAAI,MAAM,2EAA2E,EAE1F,CACD,MAAME,EAAgBD,EAAU,IAAI,CAAC,CAAE,aAAcE,EAAS,cAAeC,EAAU,KAAMC,CAAW,IAC7F;AAAA;AAAA,4DAEiCD;AAAA;AAAA;AAAA;AAAA,2CAIjBD;AAAA,2CACAE;AAAA;AAAA;AAAA;AAAA,yBAK1B,EAAE,KAAK,EAAE,EACVd,EAAQ,UAAYW,EACH,IAAII,EAAe,aAAc,CAC9C,QAAS,CACL,0CAA0ClB,YAC1C,0CAA0CC,WAC7C,EACD,aAAc,MACd,aAAc,EAClC,CAAiB,EACQ,QAAO,CAChC,EACS,EACA,MAAMkB,GAAO,CACVb,EAAQa,EAAI,OAAO,CAC/B,CAAS,EACA,QAAQ,IAAM,CACXd,EAAO,UAAU,IAAI,iBAAiB,CAClD,CAAS,CACT,EAEMe,EAAgBC,GAAM,CACxBA,EAAE,eAAc,EAChBlB,EAAQ,UAAY,GACpBE,EAAO,UAAU,OAAO,iBAAiB,EACzC,MAAMK,EAAYW,EAAE,OAAO,SAAS,GAAG,MAAM,KAAM,EAAC,YAAa,EAAC,SAAQ,EAC1EZ,EAAUC,CAAS,EACnBW,EAAE,OAAO,OACb,EAEAjB,EAAY,iBAAiB,SAAUgB,CAAY"}